<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Applications of Analytics in NHL Goaltender Evaluation by piperwolli</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Applications of Analytics in NHL Goaltender Evaluation</h1>
      <h2 class="project-tagline">hockey analytics</h2>
      <a href="https://github.com/piperwolli/HockeyAnalytics" class="btn">View on GitHub</a>
      <a href="https://github.com/piperwolli/HockeyAnalytics/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/piperwolli/HockeyAnalytics/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="the-project-in-three-sentences" class="anchor" href="#the-project-in-three-sentences" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Project in Three Sentences</h1>

<p>The purpose of this project is to assist NHL pro scouts in identifying goalies who are undervalued because they play on a bad team. Play-by-play data is collected from all 1230 games played this season to adjust for shot distance, shot type, power play, the shooter, and the team effects. The data is then analyzed using a multivariate regression model that outputs a final ranking of goalies.</p>

<p>The application of this work is immediate in the NHL playoffs that's currently underway. We can use analytics to help teams determine which goalies should start in goal. The recommendations from this analysis would have helped all three teams who have played more than one goaltender in this playoff series.</p>

<p>Note: Due to the time it takes for data-scraping (roughly 10 hours), it is recommended to load the .RData files. The final dataset used in the analysis can be found here in .csv format: <a href="https://github.com/piperwolli/FinalProject_HockeyAnalytics/blob/master/nhl_shots_2016.csv">https://github.com/piperwolli/FinalProject_HockeyAnalytics/blob/master/nhl_shots_2016.csv</a></p>

<h1>
<a id="background-and-motivation" class="anchor" href="#background-and-motivation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Background and Motivation</h1>

<p>The National Hockey League is evolving. The league introduced a hard salary cap in 2005. This effectively took away the advantage of financially resourceful franchises to attract the top players with large contracts. In 2005, the inaugural year of the cap system, each team was allowed to spend maximum $39 million with no more than 20% paid out to a single player. It's been a decade since the cap was introduced, yet most teams are still struggling with optimizing a competitive roster.</p>

<p>Under the cap system, it has never been more important to draft well and find value in free agents. Teams who do not manage their cap space end up "buying out" the bad contracts they signed. Bad contracts not only cost teams financially but also in valuable cap space. The Tampa Bay Lightning, for example, bought out Vincent Lecavalier (F) for $32Million dollars. New York Islanders are playing paying Rick DiPietro (G) $1.5M annually for 16 years.
<a href="http://www.sportsnet.ca/hockey/nhl/countdown-to-nhl-buyout-season-what-we-know/">http://www.sportsnet.ca/hockey/nhl/countdown-to-nhl-buyout-season-what-we-know/</a></p>

<h1>
<a id="the-goalies-market" class="anchor" href="#the-goalies-market" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Goalies Market</h1>

<p>The best teams in the "new era" of NHL are the teams who can optimize their contracts based on finaces - but that is misleading at best. The underlying factor behind a sound cap management system is actually a solid player evaluation system. </p>

<p>One of the most interesting component of hockey is in goaltending - no playoff teams could expect a long run at the Stanley Cup without at least "okay" goaltending. As a bit of an overview, each team has up to three goaltenders, usually one starting goalie and two back-ups. Starting goaltenders in the league typically play 50 to 60 of the 82 games in a season, and the back-ups share the net in the remaining games. Large competitive franchise typically spends north of $5M on its starting goaltender. Back-ups earn anywhere from under $1M to $5M: <a href="http://www.spotrac.com/nhl/rankings/average/goaltender/">http://www.spotrac.com/nhl/rankings/average/goaltender/</a></p>

<p>Because the salary cap system punishes team with underperforming players, teams have to be critical in allocating the cap space for offense and defense - including goalkeeping. Compare New York Rangers with the Anaheim Ducks who won equal number of games this season: NYR dedicated $9.25M in goaltenders and ranked 15th in goals against per game this season, the ANA ranks 1st in the league but only spent less than a third of budget! Having cost-efficient goaltending allows the team to spend to upgrade offensive capabilities. </p>

<h1>
<a id="the-approach" class="anchor" href="#the-approach" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Approach</h1>

<p>Unlike baseball where the team performance is more-or-less an aggregate of individual player performances, hockey is a more dynamic sport. Goaltending, however, is an area where an individual can make a large impact. This gives analytics the potential to change the game.
Traditional goalie statistics consist of number of wins, save percentage, and goals against average. There are some intuitive reasons why these basic stats are not sufficient: </p>

<ol>
<li><p>The Shots
Goalies face different types of shots, coming from different distances</p></li>
<li><p>The Situation on Ice
Teams who take more penalties force their goalies to spend more time at a disadvantage. Making a save during penalty kill should be looked at differently compared to save made playing at even strength</p></li>
<li><p>The Team
Some teams play a defensive game whereas others are more offensive-minded. A good goalie could play for a bad team and end up with poor stats (See Devan Dubnyk story: <a href="http://edmontonjournal.com/sports/hockey/nhl/goalie-devan-dubnyk-turns-page-on-struggles-from-a-different-lifetime">http://edmontonjournal.com/sports/hockey/nhl/goalie-devan-dubnyk-turns-page-on-struggles-from-a-different-lifetime</a> )</p></li>
<li><p>Players
Stopping a breakaway from a dangler (Crosby) or gloving a shot from a top sniper (Ovechkin) is different from stopping a shot from the blue line by a third pair defenseman.</p></li>
</ol>

<p>There are also other factors in play, such as the stadium, the calendar effect, home ice advantage, that could also influence a goalie's performance. Data mining from the play-by-play data allow us to adjust for these factors. However, in this project, we run into the issue of over-fitting when we run too many of these scenarios.</p>

<p>Mathematically:</p>

<p>$$Prob(Goal) = \sum\left( f_{log}(Distance, ShotType, Position) * \frac{N_{goals}}{N_{shots} - N_{misses}} + PP_e + Team_t + Opp_o + Player_i + \epsilon_0\right)$$</p>

<p>$$E[GoalsAllowed] = \sum_{i=1}^{p}\left(P(Goals)_p\right)$$</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/piperwolli/HockeyAnalytics">Applications of Analytics in NHL Goaltender Evaluation</a> is maintained by <a href="https://github.com/piperwolli">piperwolli</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
